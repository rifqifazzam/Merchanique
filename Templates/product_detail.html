
{% extends 'base.html'%}
{% block title %}Profil{% endblock title %}
{% block content %}
{% load static %}
<link rel="stylesheet" href="{% static '/productdetail.css' %}">

{% include 'navbar.html' %}

<div class="container">
    <div>
        {% if messages %}
            {% for message in messages %}
                <div class="alert alert-{{ message.tags }} success-message">{{ message }}</div>
            {% endfor %}
        {% endif %}
    </div>  
    <div class="product">
      <div class="Product-Image-Wrapper">
          <div class="Main-Image-Container">
            <img id="Main-Image" src="{{ product_images.first.image.url }}" alt="{{ product_images.first.description }}" width="200" height="200" class="mainImage"><br>
          </div>
          <div class="Image-Row-Container">
            {% for image in product_images %}
            <div class="Image-Col {% if forloop.first %}active{% endif %}" onclick="updateMainImage('{{ image.image.url }}', this)">
              <img src="{{ image.image.url }}" alt="{{ image.description }}" class="thumbnail" width="50" height="50">
            </div>
          {% endfor %}
          
      </div>
    </div>
        
    <div class="Product-Info-Wrapper">
      
      <div class="productinfoatas">
          <h1>{{product.name}} </h1>
          <p>Category: {{product.category}}</p>
          <h2>Rp {{product.price}},00 </h2>
          <h3>{{product.description}} </h3>  
      </div>

          
      <div class="productinfobawah">
        
        
        <div class="selectoption">
          {% if product.variantble %}
          {% endif %}
          <form id="add-to-cart-form" method="post">
              {% csrf_token %}
          
             {% if product.variantble %}
                <select name="size" required>
                    <option value="">Select a size</option>
                    {% for variant in product.variants.all %}
                        <option value="{{ variant.id }}">{{ variant.size }}</option>
                    {% endfor %}
                </select>
        </div>
            {% endif %}
       

              <br>
        <div class="infoquantity">
              <label for="quantity">Quantity</label>
              <input type="number" id="quantity" name="quantity" value="1" min="1">
              <br><br>
        </div>
              
        <div class="buttonsubmit">
              <button type="submit" class="btn btn-primary">Add to Cart</button>
        </div>
          
              </form>
      </div>
</div>

<script>
  const mainImage = document.getElementById('Main-Image');
  function updateMainImage(url) {
    mainImage.src = url;
  }
</script>

<script>
    setTimeout(function(){
        if (document.querySelector('.success-message')) {
            location.reload();
        }
    }, 1000);
</script>


<script>
// ...

function updateMainImage(url, el) {
  mainImage.src = url;

  // Remove 'active' class from all thumbnail images
  document.querySelectorAll('.thumbnail').forEach(thumb => {
    thumb.parentNode.classList.remove('active');
  });

  // Add 'active' class to the clicked thumbnail image
  el.classList.add('active');
}

// ...

</script>
{% endblock content %}